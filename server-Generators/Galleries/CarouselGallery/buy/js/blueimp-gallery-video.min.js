(function(n){"use strict";typeof define=="function"&&define.amd?define(["./blueimp-helper","./blueimp-gallery"],n):n(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)})(function(n,t){"use strict";var i=t.prototype,r;return n.extend(i.options,{videoContentClass:"video-content",videoLoadingClass:"video-loading",videoPlayingClass:"video-playing",videoIframeClass:"video-iframe",videoCoverClass:"video-cover",videoPlayClass:"video-play",videoPlaysInline:!0,videoPreloadProperty:"preload",videoPosterProperty:"poster"}),r=i.handleSlide,n.extend(i,{handleSlide:function(n,t){r.call(this,n,t);this.setTimeout(function(){this.activeVideo&&this.activeVideo.pause()})},videoFactory:function(t,i,r){var u=this,e=this.options,o=this.elementPrototype.cloneNode(!1),c=n(o),d=[{type:"error",target:o}],f=r||document.createElement("video"),s=this.elementPrototype.cloneNode(!1),l=document.createElement("a"),y=this.getItemProperty(t,e.urlProperty),h=this.getItemProperty(t,e.sourcesProperty),p=this.getItemProperty(t,e.titleProperty),b=this.getItemProperty(t,e.videoPosterProperty),k=[l],w,a,v;if(c.addClass(e.videoContentClass),n(l).addClass(e.videoPlayClass),n(s).addClass(e.videoCoverClass).hasClass(e.toggleClass)||k.push(s),s.draggable=!1,p&&(o.title=p,l.setAttribute("aria-label",p)),b&&(s.style.backgroundImage='url("'+b+'")'),f.setAttribute?e.videoPlaysInline&&f.setAttribute("playsinline",""):c.addClass(e.videoIframeClass),f.preload=this.getItemProperty(t,e.videoPreloadProperty)||"none",this.support.source&&h)for(v=0;v<h.length;v+=1)f.appendChild(n.extend(this.sourcePrototype.cloneNode(!1),h[v]));if(y&&(f.src=y),l.href=y||h&&h.length&&h[0].src,f.play&&f.pause){(r||n(f)).on("error",function(){u.setTimeout(i,d)}).on("pause",function(){f.seeking||(a=!1,c.removeClass(u.options.videoLoadingClass).removeClass(u.options.videoPlayingClass),w&&u.container.addClass(u.options.controlsClass),f.controls=!1,f===u.activeVideo&&delete u.activeVideo,u.interval&&u.play())}).on("playing",function(){a=!1;s.removeAttribute("style");c.removeClass(u.options.videoLoadingClass).addClass(u.options.videoPlayingClass)}).on("play",function(){window.clearTimeout(u.timeout);a=!0;c.addClass(u.options.videoLoadingClass);u.container.hasClass(u.options.controlsClass)?(w=!0,u.container.removeClass(u.options.controlsClass)):w=!1;f.controls=!0;u.activeVideo=f});n(k).on("click",function(n){u.preventDefault(n);u.activeVideo=f;a?f.pause():f.play()});o.appendChild(r&&r.element||f)}return o.appendChild(s),o.appendChild(l),this.setTimeout(i,[{type:"load",target:o}]),o}}),t});