(function(n){"use strict";typeof define=="function"&&define.amd?define(["./blueimp-helper","./blueimp-gallery"],n):n(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)})(function(n,t){"use strict";var i=t.prototype;n.extend(i.options,{indicatorContainer:"ol",activeIndicatorClass:"active",thumbnailProperty:"thumbnail",thumbnailIndicators:!0});var r=i.initSlides,u=i.addSlide,f=i.resetSlides,e=i.handleClick,o=i.handleSlide,s=i.handleClose;return n.extend(i,{createIndicator:function(t){var r=this.indicatorPrototype.cloneNode(!1),f=this.getItemProperty(t,this.options.titleProperty),e=this.options.thumbnailProperty,i,u;return this.options.thumbnailIndicators&&(e&&(i=this.getItemProperty(t,e)),i===undefined&&(u=t.getElementsByTagName&&n(t).find("img")[0],u&&(i=u.src)),i&&(r.style.backgroundImage='url("'+i+'")')),f&&(r.title=f),r.setAttribute("role","link"),r},addIndicator:function(n){if(this.indicatorContainer.length){var t=this.createIndicator(this.list[n]);t.setAttribute("data-index",n);this.indicatorContainer[0].appendChild(t);this.indicators.push(t)}},setActiveIndicator:function(t){this.indicators&&(this.activeIndicator&&this.activeIndicator.removeClass(this.options.activeIndicatorClass),this.activeIndicator=n(this.indicators[t]),this.activeIndicator.addClass(this.options.activeIndicatorClass))},initSlides:function(n){n||(this.indicatorContainer=this.container.find(this.options.indicatorContainer),this.indicatorContainer.length&&(this.indicatorPrototype=document.createElement("li"),this.indicators=this.indicatorContainer[0].children));r.call(this,n)},addSlide:function(n){u.call(this,n);this.addIndicator(n)},resetSlides:function(){f.call(this);this.indicatorContainer.empty();this.indicators=[]},handleClick:function(n){var i=n.target||n.srcElement,t=i.parentNode;if(t===this.indicatorContainer[0])this.preventDefault(n),this.slide(this.getNodeIndex(i));else if(t.parentNode===this.indicatorContainer[0])this.preventDefault(n),this.slide(this.getNodeIndex(t));else return e.call(this,n)},handleSlide:function(n,t){o.call(this,n,t);this.setActiveIndicator(t)},handleClose:function(){this.activeIndicator&&this.activeIndicator.removeClass(this.options.activeIndicatorClass);s.call(this)}}),t});